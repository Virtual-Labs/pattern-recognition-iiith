window.onload = function() {
    var i = 0;
    var t1dataset = [["Class", "ImageID", "Contrast Ratio", "Aspect Ratio", "Perimeter", "X-Symmetry", "Y-Symmetry", "Holes"],[0,2,0.189683201237905,0.09226932668329199,87,131,137,2],[0,22,0.20430295279399302,0.09476309226932698,86,143,133,2],[0,35,0.215505761659127,0.08478802992518698,77,113,119,2],[0,38,0.23659495916229897,0.08977556109725698,73,132,130,2],[0,52,0.27895787316709697,0.09725685785536199,93,149,125,2],[0,57,0.27687488229349294,0.09476309226932698,90,150,139,2],[0,64,0.30016776216275703,0.09975062344139699,94,154,160,2],[0,69,0.14787883984651298,0.09975062344139699,103,72,96,2],[0,70,0.272729189341612,0.08728179551122199,77,125,116,2],[0,76,0.202455863845403,0.08977556109725698,77,127,128,2],[0,82,0.23077112650023396,0.08977556109725698,84,135,127,3],[0,89,0.200614432119322,0.09476309226932698,92,110,109,2],[0,96,0.24247416880566197,0.08478802992518698,79,107,108,2],[0,109,0.161483321847305,0.09975062344139699,99,112,124,2],[0,115,0.268610329253126,0.107734806629834,86,136,132,2],[0,119,0.152943008341245,0.08977556109725698,91,108,116,2],[0,120,0.281047671174358,0.09975062344139699,87,166,160,2],[0,122,0.28524782249980496,0.09975062344139699,105,111,142,1],[0,157,0.161483321847305,0.11692307692307699,92,120,123,2],[0,170,0.246424798176129,0.08977556109725698,76,105,107,2],[0,193,0.18429189152186604,0.08977556109725698,82,98,115,2],[0,207,0.238548503830892,0.09975062344139699,101,140,104,2],[0,210,0.234647567369168,0.09975062344139699,95,110,102,2],[0,211,0.09958101382851099,0.08478802992518698,87,92,90,2],[0,217,0.17365454647319198,0.08728179551122199,84,125,104,2],[1,4,0.091923767033607,0.08478802992518698,50,86,84,1],[1,7,0.093446672761579,0.069825436408978,49,52,69,1],[1,9,0.060894818373917,0.062344139650873,46,39,45,1],[1,15,0.055183407300063,0.062344139650873,47,28,33,1],[1,24,0.08889064643007999,0.08478802992518698,46,86,85,1],[1,25,0.123210968688745,0.08977556109725698,77,104,100,1],[1,41,0.081381058014634,0.064837905236908,46,50,45,1],[1,60,0.096505263816786,0.082294264339152,48,85,83,1],[1,68,0.073974340449727,0.074812967581047,73,71,79,1],[1,71,0.123210968688745,0.07980049875311701,62,74,72,1],[1,73,0.056605487090534,0.059850374064838,46,28,40,1],[1,78,0.096505263816786,0.077306733167082,49,75,75,1],[1,79,0.10734641357365898,0.07980049875311701,49,88,91,1],[1,100,0.06812162069355901,0.07980049875311701,47,72,74,1],[1,103,0.052350700687896,0.059850374064838,45,31,38,1],[1,105,0.059461177024878,0.067331670822943,46,53,53,1],[1,106,0.112058524101355,0.07980049875311701,51,81,84,1],[1,113,0.073974340449727,0.064837905236908,44,34,53,1],[1,114,0.118404076499485,0.082294264339152,48,79,87,1],[1,125,0.052350700687896,0.064837905236908,45,48,51,1],[1,129,0.108912673802141,0.067331670822943,49,48,62,1],[1,135,0.141195414962815,0.08977556109725698,52,107,108,1],[1,153,0.07840614534652701,0.069825436408978,50,58,58,1],[1,175,0.056605487090534,0.064837905236908,46,51,47,1],[1,178,0.116810908980225,0.077306733167082,51,77,82,1]];
    var t2dataset = [["Class", "ImageID", "Contrast Ratio", "Aspect Ratio", "Perimeter", "X-Symmetry", "Y-Symmetry", "Holes"],[2,6,0.168407212121481,0.11692307692307699,82,135,128,2],[2,17,0.15124999460930402,0.11692307692307699,88,107,108,3],[2,26,0.248409549044715,0.09975062344139699,98,120,125,1],[2,29,0.260452072321232,0.09975062344139699,87,142,134,1],[2,77,0.14285896425179098,0.09975062344139699,84,108,110,1],[2,83,0.246424798176129,0.09226932668329199,83,124,101,2],[2,110,0.12643858493818302,0.17258883248731,75,101,83,1],[2,118,0.256412166101234,0.11692307692307699,97,123,111,1],[2,121,0.244446348081764,0.09975062344139699,79,117,139,1],[2,123,0.139536701560173,0.08977556109725698,73,114,88,1],[2,144,0.154641008845181,0.154867256637168,83,100,100,1],[2,160,0.178949225056871,0.14007782101167301,92,115,108,1],[2,162,0.21362417538705603,0.09975062344139699,97,129,133,1],[2,172,0.215505761659127,0.11692307692307699,85,120,114,2],[2,179,0.154641008845181,0.09476309226932698,97,108,103,1],[2,181,0.098040984941065,0.074812967581047,58,67,68,1],[2,188,0.252398073885428,0.09975062344139699,89,153,121,1],[2,190,0.20615572507520702,0.14007782101167301,81,121,92,1],[2,191,0.18429189152186604,0.09476309226932698,81,124,106,1],[2,200,0.166668512018778,0.17258883248731,82,96,94,1],[2,214,0.24247416880566197,0.09975062344139699,86,153,128,2],[2,221,0.2230908143944,0.09975062344139699,109,140,134,1],[2,234,0.18250563050253701,0.09476309226932698,81,156,136,2],[2,253,0.17365454647319198,0.11692307692307699,80,117,111,1],[2,254,0.228842019924087,0.09975062344139699,94,181,149,2],[3,8,0.2230908143944,0.09476309226932698,92,134,134,1],[3,11,0.163206589811943,0.08478802992518698,67,76,97,1],[3,13,0.22500189208522403,0.09975062344139699,94,147,127,1],[3,28,0.30016776216275703,0.09975062344139699,90,124,129,1],[3,31,0.154641008845181,0.14007782101167301,78,113,109,2],[3,45,0.098040984941065,0.08478802992518698,72,86,79,1],[3,50,0.18608355724820397,0.09975062344139699,83,123,130,1],[3,51,0.105784571558162,0.08478802992518698,84,89,82,1],[3,75,0.152943008341245,0.082294264339152,73,104,89,1],[3,87,0.12000179591470199,0.09975062344139699,81,132,115,1],[3,99,0.118404076499485,0.07980049875311701,75,99,83,1],[3,108,0.18608355724820397,0.09476309226932698,87,103,124,1],[3,112,0.291599945718551,0.09975062344139699,113,182,134,2],[3,131,0.12643858493818302,0.08478802992518698,69,88,99,1],[3,136,0.200614432119322,0.09975062344139699,90,122,135,1],[3,137,0.10422712908722699,0.08478802992518698,75,100,84,1],[3,150,0.219286491716048,0.09226932668329199,100,120,114,1],[3,158,0.195123821563101,0.09975062344139699,88,119,137,1],[3,180,0.2230908143944,0.107734806629834,105,142,137,1],[3,182,0.20615572507520702,0.09975062344139699,97,155,139,1],[3,199,0.15976515229431698,0.09226932668329199,83,115,122,1],[3,204,0.18429189152186604,0.107734806629834,89,144,140,1],[3,208,0.161483321847305,0.11692307692307699,92,133,116,1],[3,216,0.20430295279399302,0.09476309226932698,86,112,135,1],[3,229,0.10267406759745401,0.09226932668329199,73,113,110,1]];
    var t3dataset = [["Class", "ImageID", "Contrast Ratio", "Aspect Ratio", "Perimeter", "X-Symmetry", "Y-Symmetry", "Holes"],[8,18,0.163206589811943,0.08977556109725698,62,116,117,3],[8,32,0.195123821563101,0.09725685785536199,69,141,141,3],[8,42,0.175414147317314,0.08478802992518698,67,103,104,3],[8,47,0.12643858493818302,0.08478802992518698,82,115,86,3],[8,56,0.200614432119322,0.09476309226932698,75,143,127,3],[8,86,0.156344018186367,0.09476309226932698,86,127,123,3],[8,95,0.156344018186367,0.08478802992518698,67,118,109,3],[8,98,0.168407212121481,0.08977556109725698,75,130,120,3],[8,126,0.154641008845181,0.08977556109725698,74,107,95,3],[8,138,0.17365454647319198,0.082294264339152,54,76,85,2],[8,145,0.10734641357365898,0.08478802992518698,89,96,102,3],[8,147,0.17190020600497802,0.09725685785536199,82,132,128,3],[8,161,0.12643858493818302,0.08478802992518698,70,90,90,2],[8,189,0.164934978915064,0.082294264339152,86,118,101,3],[8,198,0.14285896425179098,0.09476309226932698,77,121,122,2],[8,203,0.152943008341245,0.09725685785536199,70,127,120,4],[8,226,0.200614432119322,0.09226932668329199,81,141,144,3],[8,241,0.11048337101780198,0.07980049875311701,65,83,82,2],[8,246,0.23077112650023396,0.08977556109725698,79,118,115,3],[8,266,0.219286491716048,0.08977556109725698,75,136,135,3],[8,296,0.149561945713518,0.08977556109725698,78,120,124,3],[8,301,0.131314940135346,0.07980049875311701,58,91,81,3],[8,313,0.191491229083182,0.09975062344139699,80,127,124,2],[8,334,0.196948436691483,0.08977556109725698,94,119,105,3],[8,344,0.161483321847305,0.09476309226932698,76,136,131,3],[9,5,0.131314940135346,0.08728179551122199,69,102,102,2],[9,20,0.098040984941065,0.08478802992518698,57,84,85,2],[9,23,0.082874677828291,0.07980049875311701,64,83,83,2],[9,34,0.116810908980225,0.09226932668329199,57,96,105,2],[9,44,0.09958101382851099,0.077306733167082,59,83,78,2],[9,46,0.14285896425179098,0.08478802992518698,72,102,97,2],[9,49,0.091923767033607,0.074812967581047,64,96,82,2],[9,55,0.131314940135346,0.09476309226932698,83,116,94,1],[9,58,0.12000179591470199,0.07980049875311701,66,92,82,2],[9,81,0.15124999460930402,0.08478802992518698,92,100,109,3],[9,88,0.154641008845181,0.08728179551122199,64,109,104,3],[9,111,0.144527370606062,0.08478802992518698,73,90,96,2],[9,117,0.154641008845181,0.082294264339152,67,87,93,2],[9,134,0.105784571558162,0.074812967581047,56,79,75,2],[9,154,0.08889064643007999,0.07980049875311701,65,84,74,2],[9,155,0.12482246145612501,0.09226932668329199,86,118,104,1],[9,163,0.12000179591470199,0.07980049875311701,70,95,84,2],[9,168,0.152943008341245,0.08478802992518698,70,110,105,2],[9,171,0.12000179591470199,0.082294264339152,71,89,88,2],[9,173,0.14285896425179098,0.09476309226932698,72,116,101,2],[9,177,0.112058524101355,0.077306733167082,59,86,88,2],[9,184,0.156344018186367,0.08478802992518698,73,85,68,2],[9,196,0.131314940135346,0.08478802992518698,68,102,103,2],[9,227,0.136233698311913,0.082294264339152,70,93,92,2],[9,228,0.12482246145612501,0.082294264339152,72,102,83,2]];
    var series1 = [];
    var series2 = [];
    var dataset = 0;
//variable Dataset which is selected
var usingDataset;
//variablle feature 1 and 2
var selectFeature1,selectFeature2;

var chart = new CanvasJS.Chart("chartContainer", {
    title: {text: "Chart"},
    axisX:{
        title: "X-Axis",
    },
    axisY: {
        title: "Y-Axis",
    },
    data: [{
        showInLegend: true,           
        legendText: "Class 1",
        color: "red",
        type: "scatter",
        dataPoints: series1
    },
    {
        showInLegend: true,           
        legendText: "Class 2",
        color: "blue",
        type: "scatter",
        dataPoints: series2
    }]
});

function load(){
    dataset = document.getElementById("dataset-button").value;
    console.log(dataset);
    if(dataset == 1 || dataset == 2 || dataset == 3){   
        if(dataset == 1)
            usingDataset = t1dataset;
        if(dataset == 2)
            usingDataset = t2dataset;
        if(dataset == 3)
            usingDataset = t3dataset;

        document.getElementById("plot-button").disabled = false;
        document.getElementById("test-button").disabled = false;
        document.getElementById("feature-1").disabled = false;
        document.getElementById("feature-2").disabled = false;
        document.getElementById("target").textContent = "Target Accuracy: " + dataset;
        document.getElementById("table-id").style.visibility = "visible";
        var table = document.createElement("TABLE");
        table.border = "1";
        table.width = "100%";

        var columnCount = t1dataset[0].length;

        var row = table.insertRow(-1);
        for (i = 0; i < columnCount; i++) {
            var headerCell = document.createElement("TH");
            headerCell.textContent = usingDataset[0][i];
            row.appendChild(headerCell);
        }

        for (i = 1; i < usingDataset.length; i++) {
            row = table.insertRow(-1);
            for (var j = 0; j < columnCount; j++) {
                var cell = row.insertCell(-1);
                cell.textContent = usingDataset[i][j];
            }
        }
        var dvTable = document.getElementById("table-id");
        dvTable.textContent = "";
        dvTable.appendChild(table);
    }
    else
    {
        document.getElementById("plot-button").disabled = true;
        document.getElementById("test-button").disabled = true;
        document.getElementById("table-id").style.visibility = "hidden";
        document.getElementById("feature-1").selectedIndex = "0";
        document.getElementById("feature-2").selectedIndex = "0";
        document.getElementById("feature-1").disabled = true;
        document.getElementById("feature-2").disabled = true;
    }
}

function plot()
{

    var xvalue = 0;
    var yvalue = 0;
    selectFeature1 = document.getElementById("feature-1").value;
    selectFeature2 = document.getElementById("feature-2").value;

    for(i = 1; i < usingDataset.length; i++){
        if(usingDataset[i][0] % 2 == 0){
            xvalue = usingDataset[i][selectFeature1];
            yvalue = usingDataset[i][selectFeature2];
            series1.push({
                x: xvalue,
                y: yvalue,
                click: onClick
            });
        }
        else{
            xvalue = usingDataset[i][selectFeature1];
            yvalue = usingDataset[i][selectFeature2];
            series2.push({
                x: xvalue,
                y: yvalue, 
                click: onClick
            });
        }
    }
    chart.render();
    chart.axisX[0].set("title", usingDataset[0][selectFeature1]);
    chart.axisY[0].set("title", usingDataset[0][selectFeature2]);



}

function onClick(e){
    load();
    for(i = 1; i < usingDataset.length; i++)
    {
        if(usingDataset[i][selectFeature1] == e.dataPoint.x && usingDataset[i][selectFeature2] == e.dataPoint.y)
        {
            var x = document.getElementById("table-id").getElementsByTagName("td");
            x[8*(i-1)].style.backgroundColor = "yellow";
            x[8*(i-1)+1].style.backgroundColor = "yellow";
            x[8*(i-1)+2].style.backgroundColor = "yellow";
            x[8*(i-1)+3].style.backgroundColor = "yellow";
            x[8*(i-1)+4].style.backgroundColor = "yellow";
            x[8*(i-1)+5].style.backgroundColor = "yellow";
            x[8*(i-1)+6].style.backgroundColor = "yellow";
            x[8*(i-1)+7].style.backgroundColor = "yellow";   
        }
    }


}

var lo = document.getElementById("load-button");
lo.addEventListener("click", load);
var plo = document.getElementById("plot-button");
plo.addEventListener("click", plot);
};